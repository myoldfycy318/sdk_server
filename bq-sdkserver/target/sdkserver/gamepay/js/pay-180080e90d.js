function closeWin(){app_bridge.dismissPWViewController()}function getParam(e){var a=(RegExp(e+"=(.+?)(&|$)").exec(location.search)||[,null])[1];return decodeURIComponent(a)}function ajaxHelp(e,a,n){$.ajax({url:e,type:"POST",cache:!1,dataType:"json",data:n||{},success:function(e){var n=e.responseCode;1e3==n?a(e.data):($(".mask").hide(),swal(e.errorMsg,"","error"))},error:function(){swal("网络故障","","error")}})}function aliPay(){ajaxHelp(pub_url+"bqpay/createWapOrder",function(e){for(var a=e.payInfo,n="",i=0;i<a.length;i++)n+='<input type="hidden" name="'+a[i].name+'" value="'+a[i].value+'"/>';$(".pay_form1").html(n).submit()},payParams)}function unionPay(){ajaxHelp(pub_url+"yinlian/createWapOrder",function(e){for(var a=e.payInfo,n="",i=0;i<a.length;i++)n+='<input type="hidden" name="'+a[i].name+'" value="'+a[i].value+'"/>';$(".pay_form2").html(n).submit()},payParams)}function handPay(e){switch(e){case 1:aliPay();break;case 2:unionPay()}}var pub_url="/",payParams={},fields=["appCode","buyerId","chargePointCode","payOrigin","gameOrderNo","channelCode","sign"];$(function(){$(".sec2_list li").hide();for(var e=JSON.parse(decodeURIComponent(atob(getParam("data")))),a=0;a<fields.length;a++)payParams[fields[a]]=e[fields[a]];var n=$(".sec1_list span");n.eq(0).text(e.buyerId),n.eq(1).text(e.appName),n.eq(2).text(e.chargePointName),n.eq(3).add($(".pay_f em")).html("&#165;"+e.chargePointAmount);for(var i=e.payType.split("|"),a=0;a<i.length;a++)$(".sec2_list li").eq(parseInt(i[a])-1).show();$(".sec2_list li:visible").size()>0&&$(".sec2_list li:visible:eq(0) i").addClass("cur"),$(".sec2_list i").click(function(){$(".sec2_list i.cur").removeClass("cur"),$(this).toggleClass("cur")}),$(".pay_btn").click(function(){if(0==$(".sec2_list .cur").size())return swal("请选择支付方式","","warning"),!1;$(".mask").show();var e=$(".sec2_list .cur").parent().index()+1;handPay(e)})});